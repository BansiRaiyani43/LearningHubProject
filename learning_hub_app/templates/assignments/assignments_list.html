{% extends 'assignments/basefile.html' %}
{% block body %}
<section class="table-components">
  <div class="container-fluid">

    <div class="title-wrapper pt-30">
      <div class="row align-items-center">
        <div class="col-md-6">
          <div class="title">
            <h2>assignments list</h2>
          </div>
        </div>

        <div class="col-md-6">
          <div class="breadcrumb-wrapper">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                <p class="total" style="margin: 0; font-weight: bold;">
                  Total assignments: {{ assignments|length }}
                </p>
              </ol>
            </nav>
          </div>
        </div>
      </div>
    </div>

    <div class="tables-wrapper">
      <div class="row">
        <div class="col-lg-12">
          <div class="card-style mb-30">

            <div style="display:flex; gap:260px;">
              <a href="{% url 'add_assignment' %}"  
                 class="main-btn success-btn btn-hover"
                 style="font-size: 15px; font-weight: 600; padding: 4px 15px;">
                 + Add New
              </a>
            </div>

            <div class="table-wrapper table-responsive">
              <table class="table">

                <!-- ================= THEAD FIXED ================= -->
                <thead>
                  <tr>
                    <th style="width:18%;">
                      <h4>Title</h4>
                    </th>

                    <th style="width:22%;">
                      <h4>Chapter</h4>
                    </th>

                    <th style="width:10%;">
                      <h4>Marks</h4>
                    </th>

                    <th style="width:18%;">
                      <h4>Due Date</h4>
                    </th>

                    <th style="width:12%;">
                      <h4>Detail</h4>
                    </th>

                    <th style="width:15%; text-align:center;">
                      <h4>Action</h4>
                    </th>
                  </tr>
                </thead>

                <!-- ================= TBODY FIXED ================= -->
                <tbody>
                  {% for a in assignments %}
                  <tr>
                    <td class="min-width" style="width:18%;">{{ a.title }}</td>

                    <td class="min-width" style="width:22%;">{{ a.chapter.title }}</td>

                    <td class="min-width" style="width:10%;">{{ a.marks }}</td>

                    <td class="min-width" style="width:18%;">
                      {{ a.due_date|date:"M. d, Y" }}
                    </td>

                    <td class="min-width" style="width:12%;">
                      <a href="{% url 'assignmet_detail' a.id %}" class="status-btn active-btn">View</a>
                    </td>

                    <td style="width:15%; text-align:center;">
                      <div class="action" style="display:flex; gap:10px; justify-content:center;">

                        <!-- Edit -->
                        <a href="{% url 'update_assignment' a.id %}" class="text-primary">
                          <i class="lni lni-pencil"></i>
                        </a>

                        <!-- Delete -->
                        <a href="{% url 'delete_assignment' a.id %}" class="text-danger"
                           onclick="return confirm('Are you sure you want to delete this assignment?');">
                          <i class="lni lni-trash-can"></i>
                        </a>
                      </div>
                    </td>

                  </tr>
                  {% empty %}
                  <tr>
                    <td colspan="6">No assignments available.</td>
                  </tr>
                  {% endfor %}
                </tbody>

              </table>

              <div class="d-flex justify-content-center mt-4">
                <a href="{% url 'assignment_list' %}" class="main-btn danger-btn btn-hover">
                  Cancel
                </a>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</section>
{% endblock %}
